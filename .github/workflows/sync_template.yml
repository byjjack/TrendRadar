name: Sync Template Updates

on:
  workflow_dispatch:
  schedule:
    - cron: '0 0 * * 0' # 每周日UTC时间0点运行

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout your repository
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.PAT_TOKEN }}

      - name: Synchronize template
        # 使用官方维护的最新稳定版本，替代旧的 v1
        uses: AndreasAugustin/actions-template-sync@v2.5.2
        with:
          # 【核心修正】新版参数名改为 source_repo_path，格式为：owner/repo
          source_repo_path: "sansan0/TrendRadar"
          # 【核心修正】新版参数名改为 upstream_branch，指源仓库的分支
          upstream_branch: "master"
          # 【重要】目标分支参数名也变了，指你仓库的分支
          destination_branch: "master" # 请确认你的仓库分支名
          # 令牌参数名未变
          github_token: ${{ secrets.PAT_TOKEN }}
          # 冲突处理参数名未变
          pr_on_conflict: false # 注意参数名是 pr_on_conflict，不是 create_pr_on_conflict
          # 删除文件参数名未变
          prune: false
